<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ficha RE:Zero RPG</title>
    <link rel="stylesheet" href="styleFichas.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Ficha RE:Zero RPG</h1>
        <p class="subtitle">
          Crie e salve sua ficha de personagem no universo RE:Zero!
        </p>
      </header>
      <main>
        <form id="fichaForm" autocomplete="off">
          <section class="acoes">
            <button type="button" onclick="gerarPDF()">üìÑ Gerar PDF</button>
            <button type="button" onclick="salvarJSON()">
              üíæ Salvar Ficha (JSON)
            </button>
            <label class="file-upload">
              üìÇ Carregar Ficha
              <input
                type="file"
                id="inputJson"
                accept=".json"
                onchange="carregarJSON()"
                hidden
              />
            </label>

            <!-- Caixa de rolagem com input -->
            <div class="rolagem-container">
              <input
                type="text"
                id="expressaoDado"
                placeholder="Digite uma rolagem (ex: 1d20+3)"
              />
              <button type="button" id="rolarDado">üé≤ Rolar</button>
            </div>

            <div id="resultadoRolagem"></div>
          </section>

          <section id="basico" class="card">
            <h2>Dados B√°sicos</h2>
            <div class="grid-2">
              <div>
                <label for="nome">Nome do Personagem:</label>
                <input
                  type="text"
                  id="nome"
                  name="nome"
                  placeholder="Seu nome"
                />
              </div>
              <div>
                <label for="idade">Idade:</label>
                <input
                  type="number"
                  id="idade"
                  name="idade"
                  min="1"
                  max="999"
                  placeholder="Idade"
                />
              </div>
              <div>
                <label for="raca">Ra√ßa:</label>
                <select id="raca" name="raca" required>
                  <option value="">Selecione...</option>
                  <option>Humano</option>
                  <option>Demi-Humano</option>
                  <option>Semi-Humano</option>
                  <option>Lobisomem</option>
                  <option>Dem√¥nio/Oni</option>
                  <option>Elfo</option>
                  <option>Triclope</option>
                  <option>Ciclope</option>
                  <option>Semi-Drag√£o</option>
                  <option>Mult-membros</option>
                  <option>Semi-Gigante</option>
                  <option>Esp√≠rito</option>
                </select>
              </div>
              <div>
                <label for="classe">Classe:</label>
                <select id="classe" name="classe" required>
                  <option value="">Selecione...</option>
                  <option>Mago</option>
                  <option>Feiticeiro</option>
                  <option>Bruxo</option>
                  <option>Necromante</option>
                  <option>B√°rbaro</option>
                  <option>Bardo</option>
                  <option>Cl√©rigo</option>
                  <option>Druida</option>
                  <option>Atirador</option>
                  <option>Cavaleiro</option>
                  <option>Paladino</option>
                  <option>Monge</option>
                  <option>Tank</option>
                  <option>Ladino</option>
                  <option>Guerreiro</option>
                  <option>Pugilista</option>
                  <option>Assassino</option>
                </select>
              </div>
              <div>
                <label for="origem">Origem:</label>
                <select id="origem" name="origem" required>
                  <option value="">Selecione...</option>
                  <option>Artista</option>
                  <option>M√©dico Arcaico</option>
                  <option>Shinobi</option>
                  <option>Nobre / Ex-nobre</option>
                  <option>Comerciante</option>
                  <option>Cavaleiro</option>
                  <option>Mercen√°rio</option>
                  <option>General / Comandante</option>
                  <option>Escravo / Ex-escravo</option>
                  <option>Criador de Metias</option>
                  <option>Criador de Armas</option>
                  <option>Bombardeiro</option>
                  <option>Investigador</option>
                  <option>Assassino</option>
                </select>
              </div>
              <div>
                <label for="sexo">Sexo:</label>
                <select id="sexo" name="sexo">
                  <option value="">Selecione...</option>
                  <option>Masculino</option>
                  <option>Feminino</option>
                  <option>Outro</option>
                </select>
              </div>
            </div>
          </section>

          <section id="atributos-section" class="card">
            <h2>
              Atributos <span class="info">(15 pontos para distribuir)</span>
            </h2>
            <div class="atributos-grid">
              <div class="atributo">
                <label for="forca">For√ßa:</label
                ><input
                  type="number"
                  id="forca"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="agilidade">Agilidade:</label
                ><input
                  type="number"
                  id="agilidade"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="carisma">Carisma:</label
                ><input
                  type="number"
                  id="carisma"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="inteligencia">Intelig√™ncia:</label
                ><input
                  type="number"
                  id="inteligencia"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="manaAttr">Mana:</label
                ><input
                  type="number"
                  id="manaAttr"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="resistencia">Resist√™ncia:</label
                ><input
                  type="number"
                  id="resistencia"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="sorte">Sorte:</label
                ><input
                  type="number"
                  id="sorte"
                  class="atributo-input"
                  value="1"
                />
              </div>
              <div class="atributo">
                <label for="deteccao">Detec√ß√£o:</label
                ><input
                  type="number"
                  id="deteccao"
                  class="atributo-input"
                  value="1"
                />
              </div>
            </div>
            <p>Pontos restantes: <span id="pontos-restantes">15</span></p>
          </section>

          <section id="pericias-section" class="card">
            <h2>Per√≠cias</h2>
            <p>
              Selecione as per√≠cias (<span id="max-pericias">0</span> m√°ximo:
              Intelig√™ncia + 3, al√©m das autom√°ticas).
            </p>
            <div id="pericias" class="pericias-grid">
              <label
                ><input type="checkbox" name="pericia" value="Acrobacia" />
                Acrobacia</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Adestramento" />
                Adestramento</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Arma" /> Arma
                (<input
                  type="text"
                  class="arma-tipo"
                  placeholder="Tipo"
                  style="width: 80px"
                />)</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Atletismo" />
                Atletismo</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Atua√ß√£o" />
                Atua√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Atualidades" />
                Atualidades</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Conhecimento" />
                Conhecimento</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Contratante" />
                Contratante</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Cria√ß√£o" />
                Cria√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Crime" />
                Crime</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Diplomacia" />
                Diplomacia</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Engana√ß√£o" />
                Engana√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Explosivos" />
                Explosivos</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Fortitude" />
                Fortitude</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Furtividade" />
                Furtividade</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Iniciativa" />
                Iniciativa</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Intimida√ß√£o" />
                Intimida√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Intui√ß√£o" />
                Intui√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Investiga√ß√£o" />
                Investiga√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Linguagem" />
                Linguagem</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Luta" />
                Luta</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Magia de √Ågua" />
                Magia de √Ågua</label
              >
              <label
                ><input
                  type="checkbox"
                  name="pericia"
                  value="Magia de Fogo/Gelo"
                />
                Magia de Fogo/Gelo</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Magia de Luz" />
                Magia de Luz</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Magia de Terra" />
                Magia de Terra</label
              >
              <label
                ><input
                  type="checkbox"
                  name="pericia"
                  value="Magia de Trevas"
                />
                Magia de Trevas</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Magia de Vento" />
                Magia de Vento</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Maldi√ß√µes" />
                Maldi√ß√µes</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Medicina" />
                Medicina</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Negocia√ß√£o" />
                Negocia√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Nobreza" />
                Nobreza</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Percep√ß√£o" />
                Percep√ß√£o</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Pilotagem" />
                Pilotagem</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Pontaria" />
                Pontaria</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Psychokinesis" />
                Psychokinesis</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Reflexos" />
                Reflexos</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Runas" />
                Runas</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Sobreviv√™ncia" />
                Sobreviv√™ncia</label
              >
              <label
                ><input type="checkbox" name="pericia" value="T√°tica" />
                T√°tica</label
              >
              <label
                ><input type="checkbox" name="pericia" value="Vontade" />
                Vontade</label
              >
            </div>
          </section>

          <section id="stats-section" class="card">
            <h2>Status</h2>
            <div class="status-bars">
              <div class="status-item">
                <label>‚ù§Ô∏è HP</label>
                <div class="status-bar">
                  <div id="hp-bar" class="bar-fill"></div>
                  <span id="hp-value" class="bar-text">0 / 0</span>
                </div>
                <div class="bar-controls">
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('hp', -1, event)"
                  >
                    ‚Äì
                  </button>
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('hp', 1, event)"
                  >
                    +
                  </button>
                </div>
              </div>

              <div class="status-item">
                <label>üß† Sanidade</label>
                <div class="status-bar">
                  <div id="sanidade-bar" class="bar-fill"></div>
                  <span id="sanidade-value" class="bar-text">0 / 0</span>
                </div>
                <div class="bar-controls">
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('sanidade', -1, event)"
                  >
                    ‚Äì
                  </button>
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('sanidade', 1, event)"
                  >
                    +
                  </button>
                </div>
              </div>

              <div class="status-item">
                <label>üîÆ Mana</label>
                <div class="status-bar">
                  <div id="mana-bar" class="bar-fill"></div>
                  <span id="mana-value" class="bar-text">0 / 0</span>
                </div>
                <div class="bar-controls">
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('mana', -1, event)"
                  >
                    ‚Äì
                  </button>
                  <button
                    type="button"
                    class="bar-btn"
                    onclick="alterarStatus('mana', 1, event)"
                  >
                    +
                  </button>
                </div>
              </div>
            </div>
          </section>

          <section id="equipamento-section" class="card">
            <h2>Equipamentos</h2>
            <label for="equipamentos">Liste seus equipamentos:</label>
            <textarea
              id="equipamentos"
              name="equipamentos"
              rows="2"
              placeholder="Ex: Katana, Armadura leve, Escudo..."
            ></textarea>
          </section>

          <section id="bencaos-defeitos" class="card">
            <h2>Ben√ß√£os & Defeitos</h2>
            <div class="grid-2">
              <div>
                <label for="bencaos">Ben√ß√£os:</label>
                <textarea
                  id="bencaos"
                  name="bencaos"
                  rows="2"
                  placeholder="Ex: Sorte, Cura acelerada..."
                ></textarea>
              </div>
              <div>
                <label for="defeitos">Defeitos:</label>
                <textarea
                  id="defeitos"
                  name="defeitos"
                  rows="2"
                  placeholder="Ex: Medo, Maldi√ß√£o..."
                ></textarea>
              </div>
            </div>
          </section>

          <section id="magias-dinamicas" class="card">
            <h2>Magias (1¬∫ C√≠rculo)</h2>
            <div id="magia-container"></div>
            <button type="button" onclick="adicionarCampoMagia()">
              + Adicionar Magia
            </button>
          </section>

          <section id="magias-livres" class="card">
            <h2>Magias Extras (livres)</h2>
            <label for="magias">Outras magias (livre):</label>
            <textarea
              id="magias"
              name="magias"
              rows="2"
              placeholder="Ex: Magia personalizada, magia de outro c√≠rculo, etc..."
            ></textarea>
          </section>

          <section id="inventario-section" class="card">
            <h2>Invent√°rio</h2>
            <div
              id="inventario-peso"
              style="margin-top: 10px; margin-bottom: 10px"
            ></div>
            <div id="inventario-list"></div>
            <div class="inventario-form">
              <input type="text" id="item-nome" placeholder="Nome do item" />
              <input
                type="number"
                id="item-quantidade"
                min="1"
                value="1"
                style="width: 60px"
              />
              <input
                type="number"
                id="item-espaco"
                min="1"
                value="1"
                style="width: 60px"
                placeholder="Espa√ßo"
                title="Espa√ßo ocupado"
              />
              <input
                type="file"
                id="item-miniatura"
                accept="image/*"
                style="width: 120px"
                title="Miniatura"
              />
              <input
                type="text"
                id="item-descricao"
                placeholder="Descri√ß√£o do item"
                style="flex: 2"
              />
              <button type="button" onclick="adicionarItemInventario()">
                + Adicionar Item
              </button>
            </div>
          </section>
        </form>
      </main>
      <aside class="preview-section" id="ficha-preview">
        <!-- Preview ser√° preenchido via JavaScript -->
      </aside>
      <!-- Container onde as notifica√ß√µes aparecer√£o -->
      <div id="notificacoes"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="scriptFichas.js"></script>
  </body>
</html>
